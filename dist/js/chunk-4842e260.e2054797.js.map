{"version":3,"sources":["webpack:///./src/components/goods/Cate.vue?ac05","webpack:///./src/components/goods/Cate.vue?fd12","webpack:///src/components/goods/Cate.vue","webpack:///./src/components/goods/Cate.vue?a29b","webpack:///./src/components/goods/Cate.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","on","showAddCateDialog","staticClass","cateList","columns","scopedSlots","_u","key","fn","scope","row","cat_deleted","staticStyle","cat_level","$event","editCate","selectCate","cat_id","queryInfo","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addCateDialogVisible","addCateDialogClosed","ref","addCateForm","addCateFormRules","model","value","callback","$$v","$set","expression","parentCateList","expandTrigger","label","children","parentCateChanged","selectedKeys","slot","addCate","editDialogVisible","editCateForm","editCateInfo","staticRenderFns","name","data","type","cat_name","cat_pid","created","getCateList","methods","newSize","newPage","getParentCateList","length","$refs","addCateFormRef","validate","resetFields","component"],"mappings":"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","file":"js/chunk-4842e260.e2054797.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cate.vue?vue&type=style&index=0&id=59052984&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cate.vue?vue&type=style&index=0&id=59052984&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"商品分类\")])],1),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showAddCateDialog}},[_vm._v(\"添加分类\")])],1)],1),_c('tree-table',{staticClass:\"tree-table\",attrs:{\"data\":_vm.cateList,\"columns\":_vm.columns,\"selection-type\":false,\"expand-type\":false,\"show-index\":\"\",\"index-text\":\"#\",\"border\":\"\"},scopedSlots:_vm._u([{key:\"isok\",fn:function(scope){return [(scope.row.cat_deleted === false)?_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"lightgreen\"}}):_c('i',{staticClass:\"el-icon-error\",staticStyle:{\"color\":\"red\"}})]}},{key:\"order\",fn:function(scope){return [(scope.row.cat_level === 0)?_c('el-tag',{attrs:{\"size\":\"mini\"}},[_vm._v(\"一级\")]):(scope.row.cat_level === 1)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\"}},[_vm._v(\"二级\")]):_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"warning\"}},[_vm._v(\"三级\")])]}},{key:\"opt\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.editCate(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.selectCate(scope.row.cat_id)}}},[_vm._v(\"删除\")])]}}])}),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[5, 10, 15, 20],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.addCateDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addCateDialogVisible=$event},\"close\":_vm.addCateDialogClosed}},[_c('el-form',{ref:\"addCateFormRef\",attrs:{\"model\":_vm.addCateForm,\"rules\":_vm.addCateFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.addCateForm.cat_name),callback:function ($$v) {_vm.$set(_vm.addCateForm, \"cat_name\", $$v)},expression:\"addCateForm.cat_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"父级分类：\"}},[_c('el-cascader',{attrs:{\"options\":_vm.parentCateList,\"props\":{ expandTrigger: 'hover', value: 'cat_id', label: 'cat_name', children: 'children' },\"clearable\":\"\",\"change-on-select\":\"\"},on:{\"change\":_vm.parentCateChanged},model:{value:(_vm.selectedKeys),callback:function ($$v) {_vm.selectedKeys=$$v},expression:\"selectedKeys\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addCateDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCate}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改分类\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"editCateFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.editCateForm,\"rules\":_vm.addCateFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.editCateForm.cat_name),callback:function ($$v) {_vm.$set(_vm.editCateForm, \"cat_name\", $$v)},expression:\"editCateForm.cat_name\"}})],1)],1),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editCateInfo}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 面包屑导航区域 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>商品分类</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片视图区域 -->\n    <el-card>\n      <el-row>\n        <el-col>\n          <el-button type=\"primary\" @click=\"showAddCateDialog\">添加分类</el-button>\n        </el-col>\n      </el-row>\n\n      <!-- 表格 -->\n      <tree-table\n        class=\"tree-table\"\n        :data=\"cateList\"\n        :columns=\"columns\"\n        :selection-type=\"false\"\n        :expand-type=\"false\"\n        show-index\n        index-text=\"#\"\n        border\n      >\n      <!-- 是否有效 -->\n      <template slot=\"isok\" slot-scope=\"scope\">\n          <i\n            class=\"el-icon-success\"\n            v-if=\"scope.row.cat_deleted === false\"\n            style=\"color: lightgreen;\"\n          ></i>\n          <i class=\"el-icon-error\" v-else style=\"color: red;\"></i>\n      </template>\n\n      <!-- 排序 -->\n      <template slot=\"order\" slot-scope=\"scope\">\n          <el-tag size=\"mini\" v-if=\"scope.row.cat_level === 0\">一级</el-tag>\n          <el-tag size=\"mini\" v-else-if=\"scope.row.cat_level === 1\" type='success'>二级</el-tag>\n          <el-tag size=\"mini\" v-else type=\"warning\">三级</el-tag>\n      </template size=\"mini\">\n\n      <!-- 操作 -->\n      <template slot=\"opt\" slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"primary\" icon=\"el-icon-edit\" @click=\"editCate(scope.row)\">编辑</el-button>\n          <el-button size=\"mini\" type=\"danger\" icon=\"el-icon-delete\" @click=\"selectCate(scope.row.cat_id)\">删除</el-button>\n      </template>\n\n      \n      </tree-table>\n\n      <!-- 分页区域 -->\n      <el-pagination\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"queryInfo.pagenum\"\n      :page-sizes=\"[5, 10, 15, 20]\"\n      :page-size=\"queryInfo.pagesize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\">\n      </el-pagination>\n    </el-card>\n\n    <!-- 添加分类的对话框 -->\n    <el-dialog\n      title=\"添加分类\"\n      :visible.sync=\"addCateDialogVisible\"\n      width=\"50%\"\n      @close=\"addCateDialogClosed\"\n    >\n      <!-- 添加分类的表单 -->\n      <el-form :model=\"addCateForm\" :rules=\"addCateFormRules\" ref=\"addCateFormRef\" label-width=\"100px\">\n        <el-form-item label=\"角色名称\" prop=\"cat_name\">\n          <el-input v-model=\"addCateForm.cat_name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"父级分类：\">\n          <!-- options 指定数据源 -->\n          <!-- caseaderProps 用来指定对象 -->\n           <el-cascader\n            v-model=\"selectedKeys\"\n            :options=\"parentCateList\"\n            :props=\"{ expandTrigger: 'hover', value: 'cat_id', label: 'cat_name', children: 'children' }\"\n            @change=\"parentCateChanged\"\n            clearable\n            change-on-select></el-cascader>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"addCateDialogVisible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"addCate\">确 定</el-button>\n      </span>\n    </el-dialog>\n    <!-- 编辑／修改分类对话框 -->\n    <el-dialog\n      title=\"修改分类\"\n      :visible.sync=\"editDialogVisible\"\n      width=\"50%\">\n      <el-form :model=\"editCateForm\" :rules=\"addCateFormRules\" ref=\"editCateFormRef\" label-width=\"100px\" class=\"demo-ruleForm\">\n        <el-form-item label=\"分类名称\" prop=\"cat_name\">\n          <el-input v-model=\"editCateForm.cat_name\"></el-input>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\">\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"editCateInfo\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Cate\",\n  data() {\n    return {\n      // 查询数据的条件\n      queryInfo: {\n        type: 3,\n        pagenum: 1,\n        pagesize: 5\n      },\n      // 商品分类的数据列表，默认为空\n      cateList: [],\n      // 总数据条数\n      total: 0,\n      // 为table指定列的定义\n      columns: [\n        {\n          label: \"分类名称\",\n          prop: \"cat_name\"\n        },\n        {\n          label: \"是否有效\",\n          // 表示将当前定义为模板列\n          type: \"template\",\n          // 表示当前这一列使用模板名称\n          template: \"isok\"\n        },\n        {\n          label: \"排序\",\n          // 表示将当前定义为模板列\n          type: \"template\",\n          // 表示当前这一列使用模板名称\n          template: \"order\"\n        },\n        {\n          label: \"操作\",\n          // 表示将当前定义为模板列\n          type: \"template\",\n          // 表示当前这一列使用模板名称\n          template: \"opt\"\n        }\n      ],\n      // 控制分类对话框的显示与隐藏\n      addCateDialogVisible: false,\n      // 添加分类表单数据对象\n      addCateForm: {\n        // 将要添加的分类名称\n        cat_name: '',\n        // 父级分类id 必填\n        cat_pid: 0,\n        // 分类等级 默认添加的是一级\n        cat_level: 0,\n      },\n      // 添加表单的验证规则对象\n      addCateFormRules: {\n        cat_name: [\n           { required: true, message: \"请输入分类名称\", trigger: \"blur\" },\n        ]\n      },\n      // 父级分类的列表\n      parentCateList: [],\n      // 指定级联选择器的配置对象\n      // caseaderProps: {\n      //   value: 'cat_id',\n      //   label: 'cat_name',\n      //   children: 'children'\n      // },\n      // 选中的父级分类id数组\n      selectedKeys:[],\n      // 控制显示修改分类信息对话框显示\n      editDialogVisible: false,\n      // 编辑分类的数据\n      editCateForm: {\n        cat_id: '',\n        cat_name: ''\n      },\n      // 编辑分类验证规则\n      // editFormRules: {\n      //   cateName: [\n      //     { required: true, message: \"请输入分类名称\", trigger: \"blur\" }\n      //   ]\n      // }\n    };\n  },\n  created() {\n    // 获取商品数据\n    this.getCateList();\n  },\n  methods: {\n    // 获取商品数据\n    async getCateList() {\n      const { data: res } = await this.$http.get(\"categories\", {\n        params: this.queryInfo\n      });\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"获取商品分类失败！\");\n      }\n\n      // 把数据列表赋值\n      this.cateList = res.data.result;\n\n      // 为总数据条数赋值\n      this.total = res.data.total;\n    },\n    // 监听pageSize改变的事件\n    handleSizeChange(newSize) {\n      this.queryInfo.pagesize = newSize;\n      this.getCateList();\n    },\n    // 监听pagenum的改变\n    handleCurrentChange(newPage) {\n      this.queryInfo.pagenum = newPage;\n      this.getCateList();\n    },\n    // 点击按钮 显示添加分类对话框\n    showAddCateDialog() {\n      // 先获取数据 再展示\n      this.getParentCateList()\n      this.addCateDialogVisible = true\n      \n    },\n    // 获取父级分类数据的列表\n    async getParentCateList() {\n      const {data : res} = await this.$http.get('categories', {\n        params: { type: 2}\n      })\n      if(res.meta.status !== 200) {\n        return this.$message.error('获取父级分类数据失败！')\n      }\n      this.parentCateList = res.data\n    },\n    // 选择项发生变化触发这个函数\n    parentCateChanged() {\n      // 如果 selectedKeys 数组中的 length 大于0 证明选中的父级分类\n      // 反之，就说明没有选择任何父级分类\n      if(this.selectedKeys.length >0) {\n        // 分类id\n        this.addCateForm.cat_pid = this.selectedKeys[this.selectedKeys.length - 1]\n        // 分类等级\n        this.addCateForm.cat_level = this.selectedKeys.length\n        return\n      }else {\n         this.addCateForm.cat_pid = 0\n        this.addCateForm.cat_level = 0\n      }\n    },\n    // 点击确定按钮，添加新的分类\n    addCate() {\n      this.$refs.addCateFormRef.validate(async valid => {\n        if(!valid) return\n        const {data : res} = await this.$http.post('categories/', this.addCateForm)\n        if(res.meta.status !== 201) {\n          return this.$message.error('添加分类失败！')\n        }\n        this.$message.success('添加分类成功！')\n        this.getCateList()\n        this.addCateDialogVisible = false\n      })\n    },\n    // 监听对话框关闭，重置数据\n    addCateDialogClosed() {\n      this.$refs.addCateFormRef.resetFields()\n      this.selectedKeys = []\n      this.addCateForm.cat_level = 0\n      this.addCateForm.cat_pid = 0\n    },\n    // 监听编辑按钮点击\n    editCate(row) {\n      // 将选中的数据保存\n      this.editCateForm.cat_id = row.cat_id\n      this.editCateForm.cat_name = row.cat_name\n\n      // 显示对话框\n      this.editDialogVisible = true\n    },\n    // 监听编辑分类确定按钮点击\n    async editCateInfo() {\n      const { data : res } = await this.$http.put('categories/' + this.editCateForm.cat_id, {\n        cat_name: this.editCateForm.cat_name\n      })\n\n      if(res.meta.status !== 200) {\n        return this.$message.error('修改分类数据失败！')\n      }\n\n      this.$message.success('修改分类数据成功！')\n\n\n      this.getCateList()\n\n      this.editCateForm.cat_id = ''\n      this.editCateForm.cat_name = ''\n\n      this.editDialogVisible = false\n    },\n    // 监听删除分类数据按钮\n    async selectCate(id) {\n      \n      const confirmResult = await this.$confirm('此操作将永久删除该分类, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err)\n\n      if (confirmResult !== \"confirm\") {\n        return this.$message.info(\"取消删除！\");\n      }\n\n      const { data: res } = await this.$http.delete('categories/'+ id)\n\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"删除分类失败！\")\n      }\n\n      this.$message.success(\"删除分类成功！\")\n      \n      this.getCateList()\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.tree-table {\n  margin-top: 15px;\n}\n.el-cascader {\n  width: 100%;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cate.vue?vue&type=template&id=59052984&scoped=true&\"\nimport script from \"./Cate.vue?vue&type=script&lang=js&\"\nexport * from \"./Cate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cate.vue?vue&type=style&index=0&id=59052984&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59052984\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}