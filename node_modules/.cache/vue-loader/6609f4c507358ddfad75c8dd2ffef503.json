{"remainingRequest":"/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/src/components/goods/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/src/components/goods/List.vue","mtime":1587799610000},{"path":"/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/node_modules/babel-loader/lib/index.js","mtime":1587821861000},{"path":"/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/node_modules/cache-loader/dist/cjs.js","mtime":1587821861000},{"path":"/Users/apple/Desktop/VUE项目_已完结/商品后台管理系统_完结/vue_shop/node_modules/vue-loader/lib/index.js","mtime":1587821881000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGlzdCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOafpeivouWPguaVsOWvueixoQogICAgICBxdWVyeUluZm86IHsKICAgICAgICBxdWVyeTogIiIsCiAgICAgICAgcGFnZW51bTogMSwKICAgICAgICBwYWdlc2l6ZTogMTAKICAgICAgfSwKICAgICAgLy8g5ZWG5ZOB5YiX6KGoCiAgICAgIGdvb2RzbGlzdDogW10sCiAgICAgIC8vIOaAu+aVsOaNruadoeaVsAogICAgICB0b3RhbDogMAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5qC55o2u5YiG6aG16I635Y+W5a+55bqU55qE5ZWG5ZOB5YiX6KGoCiAgICBhc3luYyBnZXRHb29kc0xpc3QoKSB7CiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldCgiZ29vZHMiLCB7CiAgICAgICAgcGFyYW1zOiB0aGlzLnF1ZXJ5SW5mbwogICAgICB9KTsKICAgICAgaWYgKHJlcy5tZXRhLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuiOt+WPluWVhuWTgeWIl+ihqOWksei0pe+8gSIpOwogICAgICB9CiAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi6I635Y+W5ZWG5ZOB5YiX6KGo5oiQ5Yqf77yBIik7CgogICAgICB0aGlzLmdvb2RzbGlzdCA9IHJlcy5kYXRhLmdvb2RzOwogICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICB9LAoKICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSkgewogICAgICB0aGlzLnF1ZXJ5SW5mby5wYWdlc2l6ZSA9IG5ld1NpemU7CiAgICAgIHRoaXMuZ2V0R29vZHNMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShuZXdQYWdlKSB7CiAgICAgIHRoaXMucXVlcnlJbmZvLnBhZ2VudW0gPSBuZXdQYWdlOwogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogICAgfSwKICAgIC8vIOagueaNrmlk5Yig6Zmk5pWw5o2uCiAgICBhc3luYyByZW1vdmVCeUlkKGlkKSB7CiAgICAgIGNvbnN0IGNvbmZpcm1SZXN1bHQgPSBhd2FpdCB0aGlzLiRjb25maXJtKAogICAgICAgICLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XllYblk4EsIOaYr+WQpue7p+e7rT8iLAogICAgICAgICLmj5DnpLoiLAogICAgICAgIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfQogICAgICApLmNhdGNoKGVyciA9PiBlcnIpOwoKICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICJjb25maXJtIikgewogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmluZm8oIuWPlua2iOWIoOmZpOWVhuWTge+8gSIpOwogICAgICB9CgogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoYGdvb2RzLyR7aWR9YCk7CgogICAgICBpZiAocmVzLm1ldGEuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk5ZWG5ZOB5aSx6LSl77yBIik7CiAgICAgIH0KCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5ZWG5ZOB5oiQ5Yqf77yBIik7CgogICAgICB0aGlzLmdldEdvb2RzTGlzdCgpOwogICAgfSwKICAgIC8vIOi3r+eUsei3s+i9rOWIsOa3u+WKoOWVhuWTgemhtQogICAgZ29BZGRQYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2dvb2RzL2FkZCcpCiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/components/goods","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑导航区域 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\n      <el-breadcrumb-item>参数列表</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片视图区 -->\n    <el-card>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getGoodsList\">\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"handleCurrentChange(1)\"></el-button>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"goAddPage\">添加商品</el-button>\n        </el-col>\n      </el-row>\n\n      <!-- table表格区域 -->\n      <el-table :data=\"goodslist\" border stripe>\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\n        <el-table-column label=\"商品名称\" prop=\"goods_name\"></el-table-column>\n        <el-table-column label=\"商品价格(元)\" prop=\"goods_price\" width=\"95px\"></el-table-column>\n        <el-table-column label=\"商品重量\" prop=\"goods_weight\" width=\"70px\"></el-table-column>\n        <el-table-column label=\"创建时间\" prop=\"add_time\" width=\"142px\">\n          <template slot-scope=\"scope\">{{scope.row.add_time | dateFormat}}</template>\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"130px\">\n          <template slot-scope=\"scope\">\n            <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" disabled></el-button>\n            <el-button\n              type=\"danger\"\n              icon=\"el-icon-delete\"\n              size=\"mini\"\n              @click=\"removeById(scope.row.goods_id)\"\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页区 -->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"queryInfo.pagenum\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :page-size=\"queryInfo.pagesize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        background\n      ></el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"List\",\n  data() {\n    return {\n      // 查询参数对象\n      queryInfo: {\n        query: \"\",\n        pagenum: 1,\n        pagesize: 10\n      },\n      // 商品列表\n      goodslist: [],\n      // 总数据条数\n      total: 0\n    };\n  },\n  created() {\n    this.getGoodsList();\n  },\n  methods: {\n    // 根据分页获取对应的商品列表\n    async getGoodsList() {\n      const { data: res } = await this.$http.get(\"goods\", {\n        params: this.queryInfo\n      });\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"获取商品列表失败！\");\n      }\n      // this.$message.success(\"获取商品列表成功！\");\n\n      this.goodslist = res.data.goods;\n      this.total = res.data.total;\n    },\n\n    handleSizeChange(newSize) {\n      this.queryInfo.pagesize = newSize;\n      this.getGoodsList();\n    },\n    handleCurrentChange(newPage) {\n      this.queryInfo.pagenum = newPage;\n      this.getGoodsList();\n    },\n    // 根据id删除数据\n    async removeById(id) {\n      const confirmResult = await this.$confirm(\n        \"此操作将永久删除该商品, 是否继续?\",\n        \"提示\",\n        {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\"\n        }\n      ).catch(err => err);\n\n      if (confirmResult !== \"confirm\") {\n        return this.$message.info(\"取消删除商品！\");\n      }\n\n      const { data: res } = await this.$http.delete(`goods/${id}`);\n\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"删除商品失败！\");\n      }\n\n      this.$message.success(\"删除商品成功！\");\n\n      this.getGoodsList();\n    },\n    // 路由跳转到添加商品页\n    goAddPage() {\n      this.$router.push('/goods/add')\n    }\n  }\n};\n</script>\n\n<style scoped>\n</style>"]}]}