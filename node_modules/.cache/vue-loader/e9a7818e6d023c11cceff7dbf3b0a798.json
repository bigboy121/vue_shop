{"remainingRequest":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/黑马电商/vue_shop/src/components/order/Order.vue?vue&type=style&index=0&id=7446d8cd&scoped=true&lang=css&","dependencies":[{"path":"/Users/apple/Desktop/黑马电商/vue_shop/src/components/order/Order.vue","mtime":1587799610000},{"path":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/css-loader/dist/cjs.js","mtime":1587711876000},{"path":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1587711876000},{"path":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/postcss-loader/src/index.js","mtime":1587711876000},{"path":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/cache-loader/dist/cjs.js","mtime":1587711861000},{"path":"/Users/apple/Desktop/黑马电商/vue_shop/node_modules/vue-loader/lib/index.js","mtime":1587711876000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZWwtY29sIHsKICBtYXJnaW4tYm90dG9tOiAxNXB4Owp9Ci5lbC1jYXNjYWRlciB7CiAgd2lkdGg6IDEwMCU7Cn0K"},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLA;AACA;AACA;AACA;AACA;AACA","file":"Order.vue","sourceRoot":"src/components/order","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑导航区域 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>订单管理</el-breadcrumb-item>\n      <el-breadcrumb-item>订单列表</el-breadcrumb-item>\n    </el-breadcrumb>\n\n    <!-- 卡片视图区 -->\n    <el-card>\n      <el-row>\n        <el-col :span=\"8\">\n          <el-input placeholder=\"请输入内容\">\n            <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\n          </el-input>\n        </el-col>\n\n        <!-- 订单列表数据 -->\n        <el-table :data=\"orderlist\" border stripe>\n          <el-table-column type=\"index\" label=\"#\"></el-table-column>\n          <el-table-column label=\"订单编号\" prop=\"order_name\"></el-table-column>\n          <el-table-column label=\"订单价格\" prop=\"order_price\"></el-table-column>\n          <el-table-column label=\"是否付款\" prop=\"pay_status\">\n            <template slot-scope=\"scope\">\n              <el-tag type=\"success\" v-if=\"scope.row.pay_status === '1'\">已付款</el-tag>\n              <el-tag type=\"danger\" v-else>未付款</el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"是否发货\" prop=\"is_send\"></el-table-column>\n          <el-table-column label=\"下单时间\" prop=\"create_time\">\n            <template slot-scope=\"scope\">{{scope.row.create_time | dateFormat}}</template>\n          </el-table-column>\n          <el-table-column label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showBox\"></el-button>\n              <el-button\n                type=\"success\"\n                icon=\"el-icon-location\"\n                size=\"mini\"\n                @click=\"showProgressBox\"\n              ></el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 分页区域 -->\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"queryInfo.pagenum\"\n          :page-sizes=\"[10, 15, 20]\"\n          :page-size=\"queryInfo.pagesize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n        ></el-pagination>\n\n        <!-- 修改地址对话框 -->\n        <el-dialog\n          title=\"修改地址\"\n          :visible.sync=\"addressVisible\"\n          width=\"50%\"\n          @close=\"addressDialogClosed\"\n        >\n          <!-- 表单验证 -->\n          <el-form\n            :model=\"addressForm\"\n            :rules=\"addressFormRules\"\n            ref=\"addressFormRef\"\n            label-width=\"100px\"\n          >\n            <el-form-item label=\"省市区/县\" prop=\"address1\">\n              <el-cascader :options=\"cityData\" v-model=\"addressForm.address1\"></el-cascader>\n            </el-form-item>\n            <el-form-item label=\"详细地址\" prop=\"address2\">\n              <el-input v-model=\"addressForm.address2\"></el-input>\n            </el-form-item>\n          </el-form>\n          <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"addressVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"addressVisible = false\">确 定</el-button>\n          </span>\n        </el-dialog>\n\n        <!-- 展示物流进度对话框 -->\n        <el-dialog title=\"物流进度\" :visible.sync=\"progressVisible\" width=\"50%\">\n          <!-- timeline 时间线 -->\n          <el-timeline>\n            <el-timeline-item\n              v-for=\"(activity, index) in progressInfo\"\n              :key=\"index\"\n              :timestamp=\"activity.time\"\n            >{{activity.context}}</el-timeline-item>\n          </el-timeline>\n        </el-dialog>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport cityData from \"./citydata.js\";\n\nexport default {\n  name: \"Order\",\n  data() {\n    return {\n      queryInfo: {\n        query: \"\",\n        pagenum: 1,\n        pagesize: 10\n      },\n      total: 0,\n      orderlist: [],\n      addressVisible: false,\n      addressForm: {\n        address1: [],\n        address2: \"\"\n      },\n      addressFormRules: {\n        address1: [\n          { required: true, message: \"请选择省市区/县\", trigger: \"blur\" }\n        ],\n        address2: [\n          { required: true, message: \"请填写详细地址\", trigger: \"blur\" }\n        ]\n      },\n      cityData,\n      progressVisible: false,\n      progressInfo: []\n    };\n  },\n  created() {\n    this.getOrderList();\n  },\n  methods: {\n    async getOrderList() {\n      const { data: res } = await this.$http.get(\"orders\", {\n        params: this.queryInfo\n      });\n\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"获取订单列表失败！\");\n      }\n      \n      this.total = res.data.total;\n      this.orderlist = res.data.goods;\n    },\n    handleSizeChange(newSize) {\n      this.queryInfo.pagesize = newSize;\n      this.getOrderList();\n    },\n    handleCurrentChange(newPage) {\n      this.queryInfo.pagenum = newPage;\n      this.getOrderList();\n    },\n    // 展示修改对话框\n    showBox() {\n      this.addressVisible = true;\n    },\n    // 对话框关闭 重置表单\n    addressDialogClosed() {\n      this.$refs.addressFormRef.resetFields();\n    },\n    async showProgressBox() {\n      const { data: res } = await this.$http.get(\"/kuaidi/804909574412544580\");\n      if (res.meta.status !== 200) {\n        return this.$message.error(\"获取物流进度失败！\");\n      }\n\n      this.progressInfo = res.data;\n\n      this.progressVisible = true;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.el-col {\n  margin-bottom: 15px;\n}\n.el-cascader {\n  width: 100%;\n}\n</style>"]}]}